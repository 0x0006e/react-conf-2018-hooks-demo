import { CodeSurferColumns, Step } from "code-surfer";
import {
  vsDark,
  nightOwl as hooksTheme,
} from "@code-surfer/themes";
import GreetingLoader, {
  full,
} from "./src/greeting-loader";
import { Image, Notes } from "mdx-deck";

export const theme = full(vsDark);

This is a copy of [Dan's hooks demo](https://youtu.be/dpw9EHDh2bM?t=1051) from React Conf

I built it to test [Code Surfer v3](https://github.com/pomber/code-surfer/pull/58)

---

<CodeSurferColumns sizes={[1, 2]}>
  
<Step subtitle="Here is a simple React component">
  
<GreetingLoader />

```jsx file=./src/greeting.1.1.js
```

</Step>

<Step subtitle="we want to make the 'name' editable">
    
<GreetingLoader />

```jsx 7 file=./src/greeting.1.1.js
```

</Step>
  
<Step subtitle="so we turn the component into a class">
    
<GreetingLoader version="class.1.1" />

```jsx file=./src/greeting.class.1.1.js
```

</Step>

<Step subtitle="add some state">

<GreetingLoader version="class.1.2" />

```jsx file=./src/greeting.class.1.2.js
```

</Step>

<Step subtitle="and add a change handler that calls setState">

<GreetingLoader version="class.1.3" />

```jsx 10:12,15:17,25 file=./src/greeting.class.1.3.js
```

</Step>

<Step subtitle="we can now edit the name and it should work">

<GreetingLoader version="class.1.3" />

```jsx 1:31 file=./src/greeting.class.1.3.js
```

</Step>

</CodeSurferColumns>

---

But let's take a step back

---

<CodeSurferColumns
  sizes={[1, 2]}
  themes={[hooksTheme, hooksTheme]}
>

<Step subtitle="what if we didn't have to write a class when we want to use state?">

<GreetingLoader theme={hooksTheme} />

```jsx file=./src/greeting.1.1.js
```

</Step>

<Step subtitle="we want to render an input with the name as the value">

<GreetingLoader theme={hooksTheme} />

```jsx 5,10 file=./src/greeting.hooks.1.1.js
```

</Step>

<Step subtitle="we don't know where to get name from, we'll fill it in later">

<GreetingLoader theme={hooksTheme} />

```jsx 5 file=./src/greeting.hooks.1.1.js
```

</Step>

<Step subtitle="we also need a way to update the name when the input changes">

<GreetingLoader theme={hooksTheme} />

```jsx 6,8:10,15[29:55] file=./src/greeting.hooks.1.2.js
```

</Step>

<Step subtitle="name and setName are closely related, let's put them together">

<GreetingLoader theme={hooksTheme} />

```5:6 file=./src/greeting.hooks.1.2.js

```

</Step>

<Step subtitle="where do we get name and setName from?">

<GreetingLoader theme={hooksTheme} />

```jsx  file=./src/greeting.hooks.1.3.js
```

</Step>

<Step subtitle="what if we could just **use** state from React?">

<GreetingLoader version="hooks.1.4" theme={hooksTheme} />

```jsx 1[15:40],5 file=./src/greeting.hooks.1.4.js
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={[vsDark, hooksTheme]}>

<Step>

```jsx file=./src/greeting.class.1.3.js title="Before Hooks" subtitle="A c component with state"
```

```jsx file=./src/greeting.hooks.1.4.js title="After Hooks" subtitle="A function component with state"
```

</Step>

<Step>

```jsx 7:9 file=./src/greeting.class.1.3.js title="Before Hooks" subtitle="state has to be an object"
```

```jsx 5 file=./src/greeting.hooks.1.4.js title="After Hooks" subtitle="state could be anything"
```

</Step>

<Step>

```jsx 7:12,16,24 file=./src/greeting.class.1.3.js title="Before Hooks" subtitle="we read and update the state using this.state and this.setState"
```

```jsx 5,8,14[16:27] file=./src/greeting.hooks.1.4.js title="After Hooks" subtitle="the state and the setter are just variables in the function"
```

</Step>

<Step subtitle="What is useState exactly? useState is a hook, a function provided by React that lets you hook into React features from your function components">

```jsx 1[100],31[100] file=./src/greeting.class.1.3.js title="Before Hooks"
```

```jsx 1[1:7,15:40],5 file=./src/greeting.hooks.1.4.js title="After Hooks"
```

</Step>

</CodeSurferColumns>
